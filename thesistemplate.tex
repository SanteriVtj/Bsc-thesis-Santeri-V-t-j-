%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%                                                                %%
%% An example for writting your thesis using LaTeX                %%
%% Original version by Luis Costa,  changes by Perttu Puska       %%
%% Support for Swedish added 15092014                             %%
%%                                                                %%
%% This example consists of the files                             %%
%%         thesistemplate.tex (versio 2.01)                       %%
%%         opinnaytepohja.tex (versio 2.01) (for text in Finnish) %%
%%         aaltothesis.cls (versio 2.01)                          %%
%%         kuva1.eps                                              %%
%%         kuva2.eps                                              %%
%%         kuva1.pdf                                              %%
%%         kuva2.pdf                                              %%
%%                                                                %%
%%                                                                %%
%% Typeset either with                                            %%
%% latex:                                                         %%
%%             $ latex opinnaytepohja                             %%
%%             $ latex opinnaytepohja                             %%
%%                                                                %%
%%   Result is the file opinnayte.dvi, which                      %%
%%   is converted to ps format as follows:                        %%
%%                                                                %%
%%             $ dvips opinnaytepohja -o                          %%
%%                                                                %%
%%   and then to pdf as follows:                                  %%
%%                                                                %%
%%             $ ps2pdf opinnaytepohja.ps                         %%
%%                                                                %%
%% Or                                                             %%
%% pdflatex:                                                      %%
%%             $ pdflatex opinnaytepohja                          %%
%%             $ pdflatex opinnaytepohja                          %%
%%                                                                %%
%%   Result is the file opinnaytepohja.pdf                        %%
%%                                                                %%
%% Explanatory comments in this example begin with                %%
%% the characters %%, and changes that the user can make          %%
%% with the character %                                           %%
%%                                                                %%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Uncomment one of these:
%% the 1st when using pdflatex, which directly typesets your document in
%% pdf (use jpg or pdf figures), or
%% the 2nd when producing a ps file (use eps figures, don't use ps figures!).
\documentclass[main=english,12pt,a4paper,pdftex,econ,utf8]{aaltothesis}
\usepackage{comment}
\usepackage{capt-of}
%\documentclass[english,12pt,a4paper,dvips]{aaltothesis}

%% To the \documentclass above
%% specify your school: arts, biz, chem, elec, eng, sci, econ
%% specify the character encoding scheme used by your editor: utf8, latin1

%% Use one of these if you write in Finnish (see the Finnish template):
%%
%\documentclass[finnish,12pt,a4paper,pdftex,elec,utf8]{aaltothesis}
%\documentclass[finnish,12pt,a4paper,dvips]{aaltothesis}

\usepackage{graphicx}

%% Use this if you write hard core mathematics, these are usually needed
\usepackage{amsfonts,amssymb,amsbsy, bm}
\usepackage{color, soul}
\usepackage{pst-node, auto-pst-pdf}
%% Use the macros in this package to change how the hyperref package below 
%% typesets its hypertext -- hyperlink colour, font, etc. See the package
%% documentation. It also defines the \url macro, so use the package when 
%% not using the hyperref package.
%%
%\usepackage{url}

%% Use this if you want to get links and nice output. Works well with pdflatex.
\usepackage{tikz}
\usepackage{verbatim}
\usepackage{forest}
\usetikzlibrary{arrows,trees,positioning}
\tikzstyle{circleobject}=[circle,fill=white,draw,line width=0.5mm]
\tikzstyle{line}=[draw]
\tikzstyle{arrow}=[draw, -latex]


\tikzset{%
    /forest,
    forest node/.style={circle, inner sep=0pt, text centered},
    arn n/.append style={text=white, font=\sffamily\bfseries, draw=black, text width=1.5em},
    arn r/.append style={text=red, draw=red, text width=1.5em, very thick},
  }
\usepackage{hyperref}
\usepackage{csquotes}
\hypersetup{
    pdfpagemode=UseNone, 
    colorlinks=true,
    filecolor=blue,
    pdfstartview=FitH,
    urlcolor=blue,
    linkcolor=red,
    citecolor=black,
    pdftitle={Default Title, Modify},
    pdfauthor={Your Name},
    pdfkeywords={Modify keywords},
    urlcolor=blue
}

\usepackage[
    backend=biber,
    sorting=nyt,
    style=authoryear
]{biblatex}
\addbibresource{library.bib}
\addbibresource{manual.bib}
\linespread{1.5}
%----------------- NEW COMMANDS -----------------
\newcommand{\indep}{\perp \!\!\! \perp}
\newcommand{\dsep}{\stackrel{d}{\indep}}
\let\emptyset\varnothing
\newcommand{\varset}{\bm{V}}
\newcommand{\edgeset}{\bm{\epsilon}}
\newcommand{\ch}[1]{Ch(#1)}
\newcommand{\pa}[1]{Pa(#1)}
\newcommand{\de}[1]{De(#1)}
%------------------------------------------------
%% All that is printed on paper starts here
\begin{document}

%% Change the school field to specify your school if the automatically 
%% set name is wrong
% \university{aalto-yliopisto}
% \university{aalto University}
% \school{Sähkötekniikan korkeakoulu}
% \school{School of Electrical Engineering}

%% Only for B.Sc. thesis: Choose your degree programme. 
\degreeprogram{Bachelor's Programme in Economics}
%%

%% ONLY FOR M.Sc. AND LICENTIATE THESIS: Specify your department,
%% professorship and professorship code. 
%%
\department{Department of Economics}
%\professorship{Circuit theory}
%%

%% Valitse yksi näistä kolmesta
%%
%% Choose one of these:
\univdegree{BSc}
%\univdegree{MSc}
%\univdegree{Lic}



%% Your own name (should be self explanatory...)
\author{Santeri Väätäjä}

%% Your thesis title comes here and again before a possible abstract in
%% Finnish or Swedish . If the title is very long and latex does an
%% unsatisfactory job of breaking the lines, you will have to force a
%% linebreak with the \\ control character. 
%% Do not hyphenate titles.
%% 
\thesistitle{Directed acyclic graph causal inference \\ \small Applications in econometrics}

\place{Espoo}

%% For B.Sc. thesis use the date when you present your thesis. 
%% 
%% Kandidaatintyön päivämäärä on sen esityspäivämäärä! 
\date{24.8.2021}

%% B.Sc. or M.Sc. thesis supervisor 
%% Note the "\" after the comma. This forces the following space to be 
%% a normal interword space, not the space that starts a new sentence. 
%% This is done because the fullstop isn't the end of the sentence that
%% should be followed by a slightly longer space but is to be followed
%% by a regular space.
%%
\supervisor{Prof. Pauli Murto} %{Prof.\ Pirjo Professori}

%% B.Sc. or M.Sc. thesis advisors(s). You can give upto two advisors in
%% this template. Check with your supervisor how many official advisors
%% you can have.
%%
%\advisor{Prof.\ Pirjo Professori}
\advisor{Asst. Prof. Ciprian Domnisoru}
%\advisor{M.Sc.\ Polli Pohjaaja}

%% Aalto logo: syntax:
%% \uselogo{aaltoRed|aaltoBlue|aaltoYellow|aaltoGray|aaltoGrayScale}{?|!|''}
%%
%% Logo language is set to be the same as the document language.
%% Logon kieli on sama kuin dokumentin kieli
%%
\uselogo{aaltoRed}{''}

%% Create the coverpage
%%
\makecoverpage


%% Note that when writting your master's thesis in English, place
%% the English abstract first followed by the possible Finnish abstract

%% English abstract.
%% All the information required in the abstract (your name, thesis title, etc.)
%% is used as specified above.
%% Specify keywords
%%
%% Kaikki tiivistelmässä tarvittava tieto (nimesi, työnnimi, jne.) käytetään
%% niin kuin se on yllä määritelty.
%% Avainsanat
%%
\keywords{For keywords choose concepts that are central to your thesis}
%% Abstract text
\begin{abstractpage}[english]
  Your abstract in English. Try to keep the abstract short; approximately 
  100 words should be enough. The abstract explains your research topic, 
  the methods you have used, and the results you obtained.  
  Your abstract in English. Try to keep the abstract short; approximately 
  100 words should be enough. The abstract explains your research topic, 
  the methods you have used, and the results you obtained.  

  Your abstract in English. Try to keep the abstract short; approximately 
  100 words should be enough. The abstract explains your research topic, 
  the methods you have used, and the results you obtained.  
  Your abstract in English. Try to keep the abstract short; approximately 
  100 words should be enough. The abstract explains your research topic, 
  the methods you have used, and the results you obtained.  
\end{abstractpage}

%% Force a new page so that the possible English abstract starts on a new page
%%
%% Pakotetaan uusi sivu varmuuden vuoksi, jotta 
%% mahdollinen suomenkielinen ja englanninkielinen tiivistelmä
%% eivät tule vahingossakaan samalle sivulle
\begin{comment}
\newpage
%
%% Abstract in Finnish.  Delete if you don't need it. 
\thesistitle{Opinnäyteohje}
\advisor{TkT Olli Ohjaaja}
\degreeprogram{Electronics and electrical engineering}
\department{Radiotieteen ja -tekniikan laitos}
\professorship{Piiriteoria}
%% Avainsanat
\keywords{Vastus, Resistanssi,\\ Lämpötila}
%% Tiivistelmän tekstiosa
\begin{abstractpage}[finnish]
  Tiivistelmässä on lyhyt selvitys (noin 100 sanaa)
  kirjoituksen tärkeimmästä sisällöstä: mitä ja miten on tutkittu,
  sekä mitä tuloksia on saatu. 
  Tiivistelmässä on lyhyt selvitys (noin 100 sanaa)
  kirjoituksen tärkeimmästä sisällöstä: mitä ja miten on tutkittu,
  sekä mitä tuloksia on saatu. 

  Tiivistelmässä on lyhyt selvitys (noin 100 sanaa)
  kirjoituksen tärkeimmästä sisällöstä: mitä ja miten on tutkittu,
  sekä mitä tuloksia on saatu. 
  Tiivistelmässä on lyhyt selvitys (noin 100 sanaa)
  kirjoituksen tärkeimmästä sisällöstä: mitä ja miten on tutkittu,
  sekä mitä tuloksia on saatu. 
  Tiivistelmässä on lyhyt selvitys (noin 100 sanaa)
  kirjoituksen tärkeimmästä sisällöstä: mitä ja miten on tutkittu,
  sekä mitä tuloksia on saatu. 
\end{abstractpage}

\end{comment}
%% Force new page so that the Swedish abstract starts from a new page
\newpage
%
%% Swedish abstract. Delete if you don't need it. 
%% 
\begin{comment}
    
\thesistitle{Arbetets titel}
\advisor{TkD Olli Ohjaaja} %
\degreeprogram{Electronik och electroteknik}
\department{Institutionen för radiovetenskap och -teknik}%
\professorship{Kretsteori}  %
%% Abstract keywords
\keywords{Nyckelord p\aa{} svenska,\\ Temperatur}
%% Abstract text
\begin{abstractpage}[swedish]
 Sammandrag p\aa{} svenska.
 Try to keep the abstract short, approximately 
 100 words should be enough. Abstract explains your research topic, 
 the methods you have used, and the results you obtained.  
\end{abstractpage}

\end{comment}
%% Preface
%%
%% Esipuhe 
\begin{comment}
    
\mysection{Preface}
%\mysection{Esipuhe}
I want to thank Professor Pirjo Professori
and my instructor Olli Ohjaaja for their 
good and poor guidance.\\

\vspace{5cm}
Otaniemi, 16.1.2015

\vspace{5mm}
{\hfill Eddie E.\ A.\ Engineer \hspace{1cm}}

%% Force new page after preface
%%
%% Pakotetaan varmuuden vuoksi esipuheen jälkeinen osa
%% alkamaan uudelta sivulta
\newpage
\end{comment}


%% Table of contents.
{
\hypersetup{linkcolor=blank}
\thesistableofcontents
}

%% Symbols and abbreviations
\mysection{Symbols and abbreviations}

\subsection*{Symbols}

\begin{tabular}{ll}
$\bm{V}$ & set of vertices $\{V_{1},V_{2},\ldots,V_{N}\}$ \\
$\bm{U}$ & set of unobserved variables $\{U_{1},U_{2},\ldots,U_{N}\}$ \\
$\bm{\epsilon}$ & set of edges $\{\epsilon_{1},\epsilon_{2},\ldots,\epsilon_{N}\}$ \\
$\emptyset$ & graph with no nodes or vertices \\
$\mathcal{G}$ & graph \\
$\mathcal{Z}$ & subset of graph
\begin{comment}
$\mathbf{B}$  & magnetic flux density  \\
$c$              & speed of light in vacuum $\approx 3\times10^8$ [m/s]\\
$\omega_{\mathrm{D}}$    & Debye frequency \\
$\omega_{\mathrm{latt}}$ & average phonon frequency of lattice \\
$\uparrow$       & electron spin direction up\\
$\downarrow$     & electron spin direction down
\end{comment}
\end{tabular}

\subsection*{Operators}

\begin{tabular}{ll}
$\indep$ & independency \\
$\dsep$ & d-separation \\
$\pa{\circ}$ & parents of given node \\
$\ch{\circ}$ & children of given node \\
$\de{\circ}$ & descendants of given node
\begin{comment}
$\nabla \times \mathbf{A}$              & curl of vectorin $\mathbf{A}$\\
$\displaystyle\frac{\mbox{d}}{\mbox{d} t}$ & derivative with respect to 
variable $t$\\[3mm]
$\displaystyle\frac{\partial}{\partial t}$  & partial derivative with respect 
to variable $t$ \\[3mm]
$\sum_i $                       & sum over index $i$\\
$\mathbf{A} \cdot \mathbf{B}$    & dot product of vectors $\mathbf{A}$ and 
$\mathbf{B}$
\end{comment}
\end{tabular}

\subsection*{Abbreviations}
\begin{tabular}{ll}
DAG & directed acyclic graph \\
DCG & directed cyclic graph
\begin{comment}
AC         & alternating current \\
APLAC      & an object-oriented analog circuit simulator and design tool \\
           & (originally Analysis Program for Linear Active Circuits) \\
BCS        & Bardeen-Cooper-Schrieffer \\ %% dash between the names
DC         & direct current \\
TEM        & transverse eletromagnetic
\end{comment}
\end{tabular}


%% Tweaks the page numbering to meet the requirement of the thesis format:
%% Begin the pagenumbering in Arabian numerals (and leave the first page
%% of the text body empty, see \thispagestyle{empty} below).
%% Additionally, force the actual text to begin on a new page with the 
%% \clearpage command.
%% \clearpage is similar to \newpage, but it also flushes the floats (figures
%% and tables).
%% There is no need to change these
%%
\cleardoublepage
\storeinipagenumber
\pagenumbering{arabic}
\setcounter{page}{1}


%% Text body begins. Note that since the text body
%% is mostly in Finnish the majority of comments are
%% also in Finnish after this point. There is no point in explaining
%% Finnish-language specific thesis conventions in English. Someday 
%% this text will possibly be translated to English.
%%
\section{Introduction}
%\section{Introduction}

%% Ensimm\"ainen sivu tyhj\"aksi
%% 
%% Leave first page empty
\thispagestyle{empty}

Declaring causal inference has been for a long time debated area, in social sciences in general, and respectively in economics. It is naturally very interesting for scientists across the fields to establish more profound connections than correlation to events affecting their studies. It also works as a way for economists to have larger effect on society as it enables policy advises to have more solid foundation on the effects of particular policy changes studied and research to identify relations of the particular events that can be interpreted as causal.

In this thesis I am going to give an overview on a one of such a methods that can be used to infer causal connections from data. This thesis will especially focus on the issue of how it could be applied in econometric applications specifically and what are the problems there is still to work out for it to be used if at all. The method discussed here, directed acyclic graph (DAG) causal inference, is a method used in multiple fields including computer science and epidemiology, but have had smaller role in social sciences. However in recent years there has been more interest also from these fields for example one of the main advocates of this method and scientist in computer science who have done lots of work with this method, Judea Pear and who --- quite strongly --- feels that DAG methods should be used also in economics (\cite{pearl_2014}) and Guido Imbens an economist have had some conversations over articles (\cite{Imbens2014}) about the suitability of the method in economics and social sciences.

To observe such relation between events that could be interpret as causal, usually some kind of \textit{counterfactual} must be formed, where some alternative reality differing from the observed world in which some of the causal factors have been changed. This is achieved by some model where the outcome is also differing from the observed world and in which we can then study the effects of changing those factors. This is also the case in directed acyclic graph approach. World which is formed in process is of course impossible to observe as it is by definition in someway differing from the existing world to show the different outcome and needs some model that tries to mimic it.

For all social scientists and economists this kind of tools that enable them to induce causal relationships are very useful as they try to identify causes of certain events which might have some implications for choosing optimal policies in level of governments or in smaller units of society like companies. For example \cite{Ji2018} tried to find the factors affecting natural gas prices in the United States. This kind of research, enabled by causal inference, can easily be seen as very useful and in case of energy prices could be used for example to form better mechanisms for example for emissions trading or other market mechanisms. By identifying the causal relations better policy makers have better information in hand to use for their policy decisions. 

However in DAG approach there also exists also many problems that have led to the situation that it is still reasonably rarely used in economic applications and the potential outcome framework with models such as Rubin causal model have been the standard option. Some things that causing problems in econometric uses has been for example the difficulty to implement monotonicity within the DAG framework and which is needed for example when instruments are used for causal inference and overall the lack of advantages of graphical approach in questions that economics is mostly addressing (\cite{Imbens2014}). \hl{Problems from Heckman}

\noindent \hl{ROADMAP}

\section{Overview of directed acyclic graphs}

\subsection{Directed acyclic graph as structure}

DAG's are at simplest just set containing variables $\varset$ that have some extra restrictions regarding the way nodes are connected withing the graph, but can in principle be any random variables otherwise. These restrictions are defining the set of possible relations for the variables of the graph in hand as well as defining not permitted structures in the topological path. Paths build up from the edges contained in $\edgeset$ which contain the relational information of graph. Edges thus have in case of DAG's property of direction and information on the vertex where it begins as well as where it ends. Edges and directions of a graph are not symmetric relations in case of DAG's since $\edgeset\subseteq V^2\setminus(i,i)$ where $\epsilon_i=(i,j)\neq(j,i)$ which is necessary but not sufficient condition for acyclicity. When the graph is directed it leads to the topological ordering necessarily being proceeding at every point and never having an edge leading backwards in order as Table \ref{tab:topological} shows (\cite{Peters2017}).

\input{topological_ordering}

In this thesis specially directed and acyclic graphs are discussed and thus edges have the direction information, or the information of in which direction each edge can be travelled. Acyclicity means that one vertex cannot exist twice in any possible path. In case vertex would exist twice in path it also could appear infinitely many times in path due to the nature of cycles, which radically reduces the amount of algorithms that can be applied to the graph as well as the assumptions that can be made in the context of the graph that allows the statistical interpretations and thus also prevents the causal inference methods to be used. If there would exist cycles the graph would thus be directed cyclical graph and as such fundamentally non recursive which would break some of the relationships that DAG's have and which will be discussed in more detail later (\cite{Heckman2015}). In other words cyclicity introduces feedback mechanism for the structure which would lead to the graph not being non recursive and variable within the graph could affect itself. 

\subsection{Graph operators}

As graphs have additional conditions defined compared to normal set object there also exists operators that graphs has also defined for them. These operators are also necessary for the causal analysis as these give tools for analyze and define parts of graph differing from the rest.

First concept to know is a path. Path in directed graph consists of variables that have consecutive edges connecting them so that for every variable in path $V_{i}\rightarrow V_{i+1}$, these of course also have role in causal inference as they describe the routes that causal relationships are influencing. Also tightly connected to paths are the colliders, which always exist in relation to the path. Collider of path is structure where aforementioned condition doesn't hold so $V_{i}\rightarrow V_{i-1}$. Example of such can be seen in Table \ref{tab:topological}s DAG where path from $V_{1}$ to $V_{3}$ has path $V_{1}\rightarrow V_{3}$ where no collider exist but the two other paths clearly has colliders as $V_{1}\rightarrow V_{2}\rightarrow V_{4}\rightarrow V_{5}\leftarrow V_{3}$ has $V_{5}$ as collider and $V_{1}\rightarrow V_{2}\rightarrow V_{4}\leftarrow V_{3}$ has $V_{4}$ as collider.

With paths it is possible define further relations for vertices in graph. These operators are also needed to analyze the causality in in graphs since those enable distinguishing independencies in graph and to define thus the estimates. Ancestor of variable $V$ in directed graph is such other variable which is appearing before $V$ in topological order and it has direct path to $V$. If vertex is appearing only one edge before $V$ it is called parent node and set of parents is denoted as $\pa{\circ}$. Respectively if there is direct path from $V$ to some other vertex it is called its descendant and it set of descendants is denoted by $\de{\circ}$ and if there is path only one edge long it is children $\ch{\circ}$.

\section{Directed acyclical graphs for statistics and causal inference}

To use DAG's for causal inference graphs must be given some more properties than just variables and edges. Variables or vertices can be interpreted

%% Opinn\"aytteess\"a jokainen osa alkaa uudelta sivulta, joten \clearpage
%%
%% In a thesis, every section starts a new page, hence \clearpage
\clearpage

\printbibliography

\end{document}